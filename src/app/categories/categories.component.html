<h1 class="mb-3">Waitlist categories</h1>
<div class="row">
    <div class="col-sm-4" *ngFor="let category of category$ | async">
        <div class="card mb-3">
            <h3 class="card-header">{{category.id}}</h3>
            <!-- <div class="card-body">
            <h5 class="card-title">Special title treatment</h5>
            <h6 class="card-subtitle text-muted">Support card subtitle</h6>
        </div> -->
            <!-- <div class="card-body">
            <p class="card-text">4 members on list (2 holding, 2 waiting)</p>
        </div> -->
            <ul class="list-group list-group-flush">
                <li class="list-group-item">{{category.holding}} members holding</li>
                <li class="list-group-item">{{category.waiting}} members waiting</li>
            </ul>
            <div class="card-footer">
                <div class="btn-group">
                    <button [routerLink]="'/add-wait/' + category.id" class="btn btn-primary" type="button"
                        ngbPopover="Add a member to the waitlist" triggers="mouseenter:mouseleave"><i
                            class="bi bi-plus-lg"></i> Add</button>
                    <button [routerLink]="'/category/' + category.id" class="btn btn-secondary" type="button"
                        ngbPopover="View the waitlist" triggers="mouseenter:mouseleave"><i class="bi bi-eye"></i>
                        View</button>
                    <button (click)="deleteCategory(category, deleteCategoryConfirm)" class="btn btn-dark" type="button"
                        ngbPopover="Remove this category" triggers="mouseenter:mouseleave"><i class="bi bi-trash"></i>
                        Delete</button>
                </div>
            </div>
            <!-- <div class="card-footer">
                <a href="#" class="text-muted" style="text-decoration: none;"><i class="bi bi-pencil"></i> Edit
                    category</a>
            </div> -->
        </div>
    </div>
    <div class="col-sm-4">
        <div class="card mb-3">
            <input type="text" [(ngModel)]="newCategoryName" class="form-control card-header" id="nameInput"
                placeholder="New category name...">
            <div class="card-body text-center">
                <button [disabled]="newCategoryName.length == 0" (click)="createCategory()" class="btn btn-light"
                    type="button" ngbPopover="Create new category" triggers="mouseenter:mouseleave"><i
                        class="bi bi-plus-lg"></i> Create</button>
            </div>
        </div>
    </div>
</div>

<ng-template #deleteCategoryConfirm let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-title">Category deletion</h4>
        <button type="button" class="btn-close" (click)="modal.dismiss()"></button>
    </div>
    <div class="modal-body">
        <p>
            <strong>Are you sure you want to delete this category?</strong>
        </p>
        <p>
            All holds and waitlist entries for this category will be cancelled.
            <span class="text-danger">This operation can not be undone.</span>
        </p>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" (click)="modal.dismiss()">Cancel</button>
        <button type="button" class="btn btn-danger" (click)="modal.close()">Ok</button>
    </div>
</ng-template>